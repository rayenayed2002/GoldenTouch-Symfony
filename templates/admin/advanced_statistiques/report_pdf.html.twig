{# Rapport Statistiques Avancées avec Graphiques #}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Rapport Statistiques Avancées</title>
    <style>
        body { font-family: Arial, sans-serif; color: #222; }
        h1 { color: #7367F0; }
        .stats-section { margin-bottom: 30px; }
        .stat-label { font-weight: bold; color: #555; }
        .stat-value { font-size: 1.2em; margin-left: 10px; }
        .divider { border-top: 1px solid #eee; margin: 20px 0; }
        .chart-img { display: block; margin: 30px auto; max-width: 600px; }
    </style>
</head>
<body>
    <h1>Rapport Statistiques Avancées</h1>
    <div class="stats-section">
        <div><span class="stat-label">Total Packs:</span><span class="stat-value">{{ packStats.total_packs }}</span></div>
        <div><span class="stat-label">Croissance Packs:</span><span class="stat-value">{{ packStats.growth_rate }}%</span></div>
        <div><span class="stat-label">Total Utilisateurs:</span><span class="stat-value">{{ userStats.total_users }}</span></div>
        <div><span class="stat-label">Croissance Utilisateurs:</span><span class="stat-value">{{ userStats.growth_rate }}%</span></div>
        <div><span class="stat-label">Pack le Plus Vendu:</span><span class="stat-value">{{ mostSoldPack.description }} ({{ mostSoldPack.total_sales }})</span></div>
        <div><span class="stat-label">Prix Moyen des Packs:</span><span class="stat-value">€{{ averagePackPrice }}</span></div>
    </div>
    <div class="divider"></div>
    <div class="stats-section">
        <h2>Graphiques & Visualisations</h2>
        <p>Les graphiques suivants représentent visuellement les statistiques clés. (Pour PDF, chaque graphique doit être généré côté serveur et injecté en tant qu'image base64)</p>
        <!-- Exemple de graphique (remplacer src par une variable Twig contenant l'image base64) -->
        <div style="margin-bottom: 32px;">
            <h3>Évolution des réservations</h3>
            {% if reservationTrendsChartBase64 is defined %}
                <img class="chart-img" src="data:image/png;base64,{{ reservationTrendsChartBase64 }}" alt="Évolution des réservations">
            {% else %}
                <div style="color: #999;">[Graphique à insérer ici]</div>
            {% endif %}
        </div>
        <div style="margin-bottom: 32px;">
            <h3>Répartition des ventes des packs</h3>
            {% if packsSalesChartBase64 is defined %}
                <img class="chart-img" src="data:image/png;base64,{{ packsSalesChartBase64 }}" alt="Répartition des ventes des packs">
            {% else %}
                <div style="color: #999;">[Diagramme circulaire à insérer ici]</div>
            {% endif %}
        </div>
        <div style="margin-bottom: 32px;">
            <h3>Utilisateurs actifs par période</h3>
            {% if usersActiveChartBase64 is defined %}
                <img class="chart-img" src="data:image/png;base64,{{ usersActiveChartBase64 }}" alt="Utilisateurs actifs par période">
            {% else %}
                <div style="color: #999;">[Graphique d'utilisateurs à insérer ici]</div>
            {% endif %}
        </div>
        <!-- Ajoutez d'autres graphiques selon vos besoins -->
    </div>
    <div class="divider"></div>
    <div class="stats-section">
        <p>Ce rapport PDF est personnalisé pour votre entreprise. Pour chaque graphique affiché sur le dashboard web, générez une image côté serveur et passez-la à ce template sous forme de variable base64.</p>
    </div>
</body>
</html>
