{% extends "admin/layout.html.twig" %}

{% block title "Profil" %}

{% block title_h1 "Mon profil" %}

{% block body %}

<div class="card shadow mb-4" style="max-width: 500px; margin: 100px auto;">
    <!-- User Profile Header -->
    <div class="card-header py-3 text-center bg-gradient-primary text-white">
        <div class="user-avatar mx-auto mb-3">
            <img src="{{ asset('uploads/photos/' ~ user.photo) }}"
                 class="rounded-circle border-white" 
                 alt="User Avatar"
                 style="width: 100px; height: 100px; object-fit: cover; border: 3px solid white;">
        </div>
        <h3 class="font-weight-bold mb-1">{{ user.fullName }}</h3>
    </div>
    
    <!-- User Details Body -->
    <div class="card-body">
        <div class="text-center text-muted mb-4">
            <i class="fas fa-calendar-alt mr-1"></i> Membre depuis {{ user.createdAt|date('d/m/Y') }}
        </div>
        
        <div class="user-details">
            <div class="detail-row">
                <div class="detail-icon">
                    <i class="fas fa-envelope text-primary"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">Email</div>
                    <div class="detail-value">{{ user.email }}</div>
                </div>
            </div>
            
            <div class="detail-row">
                <div class="detail-icon">
                    <i class="fas fa-user-tag text-primary"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">Nom d'utilisateur</div>
                    <div class="detail-value">{{ user.username }}</div>
                </div>
            </div>
            
            <div class="detail-row">
                <div class="detail-icon">
                    <i class="fas fa-shield-alt text-primary"></i>
                </div>
                <div class="detail-content">
                    <div class="detail-label">RÃ´le</div>
                    <div class="detail-value">
                        <span class="role-text role-{{ user.roleTitle == 'Administrateur' ? 'admin' : 'user' }}">
                            {{ user.roleTitle }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Card Footer with Actions -->
    <div class="card-footer bg-white text-center">
        <a href="{{ path('admin_account_edit') }}" class="btn btn-sm btn-primary mr-2">
            <i class="fas fa-edit mr-1"></i> Modifier
        </a>
        {# Safe fallback options #}
        {% if app.request.headers.get('referer') %}
            <a href="{{ app.request.headers.get('referer') }}" class="btn btn-sm btn-secondary">
                <i class="fas fa-arrow-left mr-1"></i> Retour
            </a>
        {% else %}
            <a href="{{ path('admin_user_index') }}" class="btn btn-sm btn-secondary">
                <i class="fas fa-home mr-1"></i> Accueil
            </a>
        {% endif %}
    </div>
</div>

<style>
    .user-avatar {
        width: 100px;
        height: 100px;
        margin-top: -50px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
    }
    
    .user-details {
        background-color: #f8f9fc;
        border-radius: 0.35rem;
        padding: 1rem;
    }
    
    .detail-row {
        display: flex;
        align-items: center;
        padding: 0.75rem 0;
        border-bottom: 1px solid #e3e6f0;
    }
    
    .detail-row:last-child {
        border-bottom: none;
    }
    
    .detail-icon {
        width: 40px;
        font-size: 1.1rem;
        text-align: center;
    }
    
    .detail-content {
        flex: 1;
    }
    
    .detail-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        color: #858796;
        letter-spacing: 0.5px;
    }
    
    .detail-value {
        font-weight: 600;
        color: #3a3b45;
    }
    
    .card-header {
        padding-bottom: 4rem !important;
        position: relative;
    }
    
    .role-text {
        font-weight: 600;
        color: #3a3b45;
    }
    
    .role-text.role-admin {
        color: #e74a3b;
    }
    
    .role-text.role-user {
        color: #36b9cc;
    }
</style>

{% endblock %}