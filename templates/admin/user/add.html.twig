{% extends "admin/layout.html.twig" %}

{% block title "Utilisateurs" %}

{% block title_h1 "Cr√©ation d'un utilisateur" %}

{% form_theme form _self %}

{# Define custom form theme to style form elements #}
{% block form_row %}
    <div class="form-group">
        {{ form_label(form, null, {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form, {'attr': {'class': 'form-control'}}) }}
        {{ form_errors(form) }}
    </div>
{% endblock %}

{% block password_widget %}
    <div class="input-group input-group-merge form-password-toggle">
        <input 
            type="password"
            {{ block('widget_attributes') }}
            class="form-control password-field"
            autocomplete="new-password"
        />
        <span class="input-group-text cursor-pointer">
            <i class="ti ti-eye-off"></i>
        </span>
    </div>
{% endblock %}




{% block choice_widget_expanded %}
    <div class="mt-2">
        {% for child in form %}
            <div class="form-check">
                {{ form_widget(child, {'attr': {'class': 'form-check-input'}}) }}
                {{ form_label(child, null, {'label_attr': {'class': 'form-check-label'}}) }}
            </div>
        {% endfor %}
    </div>
{% endblock %}

{% block file_widget %}
    <div class="custom-file">
        {{ form_widget(form, {'attr': {'class': 'form-control'}}) }}
    </div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .user-form-card {
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.08);
            border: none;
            border-radius: 0.5rem;
            background-color: #fff;
            overflow: hidden;
        }
        
        .user-form-card .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-bottom: none;
            padding: 1.5rem;
            color: white;
        }
        
        .user-form-card .card-header h6 {
            margin: 0;
            font-weight: 600;
            font-size: 1.25rem;
        }
        
        .user-form-card .card-body {
            padding: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-control {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            font-weight: 400;
            color: #495057;
            background-color: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 0.375rem;
            transition: all 0.2s ease;
        }
        
        .form-control:focus {
            border-color: #a0a0ff;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.15);
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #4a4a4a;
            font-size: 0.9375rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 0.375rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-outline-secondary {
            padding: 0.75rem 1.5rem;
            border: 1px solid #e0e0e0;
            color: #6c757d;
            transition: all 0.3s ease;
        }
        
        .btn-outline-secondary:hover {
            background-color: #f8f9fa;
            border-color: #d1d7dc;
        }
        
        .form-error-message {
            color: #ff4757;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: block;
        }
        
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #f0f0f0;
        }
        
        .form-check-input {
            margin-right: 0.5rem;
        }
        
        /* Input group styling for password fields */
        .input-group {
            position: relative;
            display: flex;
            flex-wrap: wrap;
            align-items: stretch;
            width: 100%;
        }
        
        .input-group-append {
            margin-left: -1px;
            display: flex;
        }
        
        .input-group > .form-control {
            position: relative;
            flex: 1 1 auto;
            width: 1%;
            min-width: 0;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }
        
        .toggle-password {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            border-color: #e0e0e0;
            background-color: #f8f9fa;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .toggle-password:hover {
            background-color: #e9ecef;
            color: #495057;
        }
        
        /* Form row styling to create a two-column layout */
        @media (min-width: 768px) {
            .user-form .form-group {
                width: 48%;
                display: inline-block;
                vertical-align: top;
                margin-right: 4%;
            }
            
            .user-form .form-group:nth-child(even) {
                margin-right: 0;
            }
        }
    </style>
{% endblock %}

{% block body %}
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-xl-8 col-lg-10">
            <div class="user-form-card">
                <div class="card-header">
                    <h6>
                        <i class="fas fa-user-plus mr-2"></i>Informations utilisateur
                    </h6>
                </div>
                <div class="card-body">
                    {{ form_start(form, { 
                        attr: { 
                            novalidate: 'novalidate',
                            class: 'user-form' 
                        } 
                    }) }}
                    
                    {# Form fields will be rendered with the custom theme defined above #}
                    {{ form_widget(form) }}
                    
                    {{ block('form_actions') }}
                    
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
   document.addEventListener('DOMContentLoaded', function() {
    // For password visibility toggle
    var toggles = document.querySelectorAll('.form-password-toggle');

    toggles.forEach(function(toggle) {
        var input = toggle.querySelector('.password-field');
        var icon = toggle.querySelector('.input-group-text i');

        toggle.querySelector('.input-group-text').addEventListener('click', function() {
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('ti-eye-off');
                icon.classList.add('ti-eye');
            } else {
                input.type = 'password';
                icon.classList.remove('ti-eye');
                icon.classList.add('ti-eye-off');
            }
        });
    });
});

    </script>
{% endblock %}

{% block form_actions %}
    <div class="form-actions">
        <a href="{{ path('admin_user_index') }}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left mr-2"></i> Retour
        </a>
    
    </div>
{% endblock %}