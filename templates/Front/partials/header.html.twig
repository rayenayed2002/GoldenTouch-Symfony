
    
<input type="hidden" name="_token" value="{{ csrf_token('add_to_cart') }}">


    <div class="th-menu-wrapper">
        <div class="th-menu-area text-center">
            <button class="th-menu-toggle "><i class="fal fa-times"></i></button>
            <div class="mobile-logo">
                <a href="index.html"><img src="{{ asset('Front/img/logo.svg') }}" alt="Taxiar"></a>
            </div>
            <div class="th-mobile-menu">
                <ul>
                    <li class="menu-item-has-children">
                        <a href="index.html">Home</a>
                        <ul class="sub-menu">
                            <li><a href="index.html">Home One </a></li>
                            <li><a href="index-2.html">Home Two </a></li>
                            <li><a href="index-3.html">Home Three </a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="about.html">About Us</a>
                    </li>
                    <li class="menu-item-has-children">
                        <a href="#">Service</a>
                        <ul class="sub-menu">
                            <li><a href="service.html">Service</a></li>
                            <li><a href="service-details.html">Service Details</a></li>
                        </ul>
                    </li>
                    <li class="menu-item-has-children">
                        <a href="#">Blog</a>
                        <ul class="sub-menu">
                            <li><a href="blog.html">Blog</a></li>
                            <li><a href="blog-details.html">Blog Details</a></li>
                        </ul>
                    </li>
                    <li class="menu-item-has-children">
                        <a href="#">Pages</a>
                        <ul class="sub-menu">
                            <li class="menu-item-has-children"><a href="#">Shop</a>
                                <ul class="sub-menu">
                                    <li><a href="shop.html">Shop</a></li>
                                    <li><a href="shop-details.html">Shop Details</a></li>
                                    <li><a href="cart.html">Cart Page</a></li>
                                    <li><a href="checkout.html">Checkout</a></li>
                                    <li><a href="wishlist.html">Wishlist</a></li>
                                </ul>
                            </li>
                            <li><a href="team.html">Driver</a></li>
                            <li><a href="team-details.html">Driver Details</a></li>
                            <li><a href="taxi.html">Taxi</a></li>
                            <li><a href="taxi-details.html">Taxi Details</a></li>
                            <li><a href="booking.html">Booking Ride</a></li>
                            <li><a href="faq.html">Faq</a></li>
                            <li><a href="error.html">Error</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="sidemenu-wrapper shopping-cart d-none d-lg-block  ">
        <div class="sidemenu-content">
            <button class="closeButton sideMenuCls"><i class="far fa-times"></i></button>
            <div class="widget woocommerce widget_shopping_cart">
                <h3 class="widget_title">Shopping cart</h3>
                <div class="widget_shopping_cart_content">
                    <ul class="woocommerce-mini-cart cart_list product_list_widget">
                        <li class="woocommerce-mini-cart-item mini_cart_item">
                            <a href="#" class="remove remove_from_cart_button"><i class="far fa-times"></i></a>
                            <a href="#"><img src="{{ asset('Front/img/product/product_thumb_1_1.jpg') }}"
                                    alt="Cart Image">Suspension-Coil</a>
                            <span class="quantity">1 ×
                                <span class="woocommerce-Price-amount amount">
                                    <span class="woocommerce-Price-currencySymbol">$</span>94</span>,
                            </span>
                        </li>
                        <li class="woocommerce-mini-cart-item mini_cart_item">
                            <a href="#" class="remove remove_from_cart_button"><i class="far fa-times"></i></a>
                            <a href="#"><img src="{{ asset('Front/img/product/product_thumb_1_2.jpg') }}" alt="Cart Image">absorbers
                                Brake</a>
                            <span class="quantity">1 ×
                                <span class="woocommerce-Price-amount amount">
                                    <span class="woocommerce-Price-currencySymbol">$</span>89</span>
                            </span>
                        </li>
                        <li class="woocommerce-mini-cart-item mini_cart_item">
                            <a href="#" class="remove remove_from_cart_button"><i class="far fa-times"></i></a>
                            <a href="#"><img src="{{ asset('Front/img/product/product_thumb_1_3.jpg') }}"
                                    alt="Cart Image">Motorcycle-Shock</a>
                            <span class="quantity">1 ×
                                <span class="woocommerce-Price-amount amount">
                                    <span class="woocommerce-Price-currencySymbol">$</span>75</span>
                            </span>
                        </li>
                        <li class="woocommerce-mini-cart-item mini_cart_item">
                            <a href="#" class="remove remove_from_cart_button"><i class="far fa-times"></i></a>
                            <a href="#"><img src="{{ asset('Front/img/product/product_thumb_1_4.jpg') }}" alt="Cart Image">Body
                                Spring</a>
                            <span class="quantity">1 ×
                                <span class="woocommerce-Price-amount amount">
                                    <span class="woocommerce-Price-currencySymbol">$</span>72</span>
                            </span>
                        </li>
                        <li class="woocommerce-mini-cart-item mini_cart_item">
                            <a href="#" class="remove remove_from_cart_button"><i class="far fa-times"></i></a>
                            <a href="#"><img src="{{ asset('Front/img/product/product_thumb_1_5.jpg') }}" alt="Cart Image">Body
                                Spring</a>
                            <span class="quantity">1 ×
                                <span class="woocommerce-Price-amount amount">
                                    <span class="woocommerce-Price-currencySymbol">$</span>81</span>
                            </span>
                        </li>
                    </ul>
                    <p class="woocommerce-mini-cart__total total">
                        <strong>Subtotal:</strong>
                        <span class="woocommerce-Price-amount amount">
                            <span class="woocommerce-Price-currencySymbol">$</span>318.00</span>
                    </p>
                    <p class="woocommerce-mini-cart__buttons buttons">
                        <a href="cart.html" class="th-btn style1 wc-forward">View cart</a>
                        <a href="checkout.html" class="th-btn style1 checkout wc-forward">Checkout</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="sidemenu-wrapper d-none d-lg-block  ">
        <div class="sidemenu-content bg-title">
            <button class="closeButton sideMenuCls"><i class="far fa-times"></i></button>
            <div class="widget footer-widget">
                <h3 class="widget_title">About Company</h3>
                <div class="th-widget-about">
                    <p class="footer-text">Centric aplications productize before front end vortals visualize front end
                        is results and value added</p>
                    <h4 class="footer-info-title">WE ARE AVAILABLE</h4>
                    <p class="footer-text">Mon-Sat: 09.00 am to 6.30 pm</p>
                    <a href="contact.html" class="th-btn style3"><span class="btn-text">Contact Us</span></a>
                </div>
            </div>
            <div class="widget footer-widget">
                <h3 class="widget_title">Recent Posts</h3>
                <div class="recent-post-wrap">
                    <div class="recent-post">
                        <div class="media-img">
                            <a href="blog-details.html"><img src="{{ asset('Front/img/blog/recent-post-1-2.jpg') }}"
                                    alt="Blog Image"></a>
                        </div>
                        <div class="media-body">
                            <div class="recent-post-meta">
                                <a href="blog.html"><i class="far fa-calendar-days"></i>22th May, 2023</a>
                            </div>
                            <h4 class="post-title"><a class="text-inherit" href="blog-details.html">How To Start Car
                                    Engine Faster</a></h4>
                            <a class="line-btn" href="blog.html">Read More<i class="fa-regular fa-arrow-right"></i></a>
                        </div>
                    </div>
                    <div class="recent-post">
                        <div class="media-img">
                            <a href="blog-details.html"><img src="{{ asset('Front/img/blog/recent-post-1-3.jpg') }}"
                                    alt="Blog Image"></a>
                        </div>
                        <div class="media-body">
                            <div class="recent-post-meta">
                                <a href="blog.html"><i class="far fa-calendar-days"></i>25th May, 2023</a>
                            </div>
                            <h4 class="post-title"><a class="text-inherit" href="blog-details.html">How to start car
                                    engine slowly</a></h4>
                            <a class="line-btn" href="blog.html">Read More<i class="fa-regular fa-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="widget footer-widget">
                <h4 class="widget_title">Get Newsletter</h4>
                <div class="newsletter-widget">
                    <p class="md-20">Sign up today for hints, tips & latest car overview and news</p>
                    <form class="newsletter-form">
                        <input class="form-control" type="email" placeholder="Email Address" required="">
                        <button type="submit" class="newsletter-btn"><i class="fas fa-envelope"></i></button>
                    </form>
                    <div class="th-social  style2">
                        <a target="_blank" href="https://facebook.com/"><i class="fab fa-facebook-f"></i></a>
                        <a target="_blank" href="https://twitter.com/"><i class="fab fa-twitter"></i></a>
                        <a target="_blank" href="https://instagram.com/"><i class="fab fa-instagram"></i></a>
                        <a target="_blank" href="https://linkedin.com/"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="popup-search-box d-none d-lg-block">
        <button class="searchClose"><i class="fal fa-times"></i></button>
        <form action="#">
            <input type="text" placeholder="What are you looking for">
            <button type="submit"><i class="fal fa-search"></i></button>
        </form>
    </div>


    <header class="th-header header-layout7">
        <div class="header-top">
            <div class="container">
                <div class="row justify-content-center justify-content-md-between align-items-center gy-2">
                    <div class="col-auto d-none d-md-block">
                        <div class="header-links">
                            <ul>
                                <li><i class="fa-thin fa-envelope"></i><a
                                        href="mailto:GoldenTouch@gmail.com">GoldenTouch@gmail.com</a>
                                </li>
                                <li><i class="fa-thin fa-phone"></i><a href="tel:+468254762443">(+468) 254 762 443</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-auto">
                        <div class="header-right">
                            <div class="langauge">
                                <select class="form-select nice-select">
                                    <option selected="">English</option>
                                    <option>Hindi</option>
                                </select>
                            </div>
                            <div class="header-social">
                                <span class="social-title">Follow Us On:</span>
                                <a href="https://www.facebook.com/"><i class="fab fa-facebook-f"></i></a>
                                <a href="https://www.twitter.com/"><i class="fab fa-twitter"></i></a>
                                <a href="https://www.linkedin.com/"><i class="fab fa-linkedin-in"></i></a>
                                <a href="https://www.instagram.com/"><i class="fab fa-instagram"></i></a>
                                <a href="https://www.youtube.com/"><i class="fa-brands fa-youtube"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

<div class="sticky-wrapper">
    <div class="menu-area">
        <div class="container">
            <div class="row align-items-center justify-content-between">
                <div class="col-auto">
                    <div class="header-logo">
<img src="{{ asset('Front/img/logo44.png') }}" alt="GoldenTouch" style="height: 130px;">
                    </div>
                </div>
                <div class="col-auto me-xl-auto">
                    <nav class="main-menu d-none d-lg-block">
                        <ul>
                            <li>
                                <a href="{{ path('app_pack_index') }}"">Pack</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Event Planner</a>
                                <ul class="sub-menu">
                                    <li><a href="{{ path('app_add_event') }}">Ajout Event</a></li>
                                    <li><a href="{{ path('app_draft_events') }}">Liste Event</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Materielles</a>
                                <ul class="sub-menu">    
                                    <li><a href="{{ path('app_mes_reservations') }}">Mes Reservations</a></li>
                                    <li><a href="{{ path('app_materiels_index') }}">Liste Materiels</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Personnel</a>
                                <ul class="sub-menu">
                                     <li>
                                <a href="{{ path('app_reservation_perso_index') }}"">Personnels</a>
                            </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Lieu</a>
                                <ul class="sub-menu">
                                   <li>
                                <a href="{{ path('app_lieu_index') }}"">Lieux</a>
                            </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Autre</a>
                                <ul class="sub-menu">
                                       <li><a href="{{ path('app_my_Commandes') }}">Commandes</a></li>
                                    <li><a href="#">Reclamation</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <button class="th-menu-toggle d-inline-block d-lg-none"><i class="far fa-bars"></i></button>
                </div>
                <div class="col-auto d-none d-xl-block">
                    <div class="header-button">
                        <button type="button" class="icon-btn searchBoxToggler"><i class="far fa-search"></i></button>
<a href="{{ path('app_panier') }}" class="icon-btn " id="cartIcon">
    <i class="fa-regular fa-bag-shopping"></i>
    <span class="badge">0</span>
</a>

                       
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="logo-shape"><img src="{{ asset('Front/img/logo-shape.svg') }}" alt=""></div>
    </header>

<script>


document.addEventListener('DOMContentLoaded', function() {
    // Function to update cart count from server
    async function updateCartCount() {
        try {
            const response = await fetch('{{ path('app_panier_count') }}');
            const data = await response.json();
            document.querySelector('.badge').textContent = data.count;
        } catch (error) {
            console.error('Error updating cart count:', error);
        }
    }

    // Initial cart count update
    updateCartCount();

    // Make event cards draggable
    document.querySelectorAll('.event-card').forEach(card => {
        card.draggable = true;
        
        card.addEventListener('dragstart', (e) => {
            const eventData = {
                idEvent: card.dataset.eventId,
                categorie: card.dataset.categorie,
                date: card.dataset.date
            };
            e.dataTransfer.setData('application/json', JSON.stringify(eventData));
        });
    });

    // Handle drop on shopping bag
    const shoppingBag = document.querySelector('#cartIcon');
    
    shoppingBag.addEventListener('dragover', (e) => {
        e.preventDefault();
    });

    shoppingBag.addEventListener('drop', async (e) => {
        e.preventDefault();
        const eventData = JSON.parse(e.dataTransfer.getData('application/json'));
        
        try {
            const response = await fetch('{{ path('app_panier_add') }}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-TOKEN': document.querySelector('input[name="_token"]').value
                },
                body: JSON.stringify(eventData)
            });

            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    // Update cart count from server after successful add
                    await updateCartCount();

                    // Find and remove the card's parent column
                    const cardToRemove = document.querySelector(
                        `.event-card[data-event-id="${eventData.idEvent}"]`
                    );
                    
                    if (cardToRemove) {
                        const columnParent = cardToRemove.closest('.col-xl-4');
                        columnParent.style.transition = 'all 0.3s ease';
                        columnParent.style.opacity = '0';
                        columnParent.style.transform = 'translateY(20px)';
                        
                        setTimeout(() => {
                            columnParent.remove();
                            document.querySelector('.row.gy-40').style.display = 'none';
                            document.querySelector('.row.gy-40').offsetHeight;
                            document.querySelector('.row.gy-40').style.display = '';
                        }, 300);
                    }
                } else {
                    alert('Failed to add to cart: ' + (result.message || 'Unknown error'));
                }
            }
        } catch (error) {
            console.error('Error:', error);
            alert('Failed to add to cart');
        }
    });
});


    </script>
