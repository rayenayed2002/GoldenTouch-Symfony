{% extends 'front.html.twig' %}

{% block title %}Custom Page Title{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <style>
        .flatpickr-calendar {
            z-index: 99999 !important;
            margin-top: 5px;
        }
    </style>
{% endblock %}

{% block content %}


<div class="position-relative space">
    <div class="container">
            {{ form_start(form) }} <!-- Ajoutez cette ligne -->

      <div class="row">
    <!-- Nom -->
    <div class="form-group col-12">
        {{ form_label(form.nom) }}
        {{ form_widget(form.nom) }}
        {{ form_errors(form.nom) }}
    </div>

    <!-- Catégorie -->
    <div class="form-group col-12">
        {{ form_label(form.categorie) }}
        {{ form_widget(form.categorie) }}
        {{ form_errors(form.categorie) }}
    </div>

    <!-- Date -->
 <div class="form-group col-12">
            {{ form_label(form.date) }}
            <div class="input-group">
                {{ form_widget(form.date, {'attr': {'class': 'form-control date-picker'}}) }}
                <span class="input-group-text">
                    <i class="fa-regular fa-calendar"></i>
                </span>
            </div>
            {{ form_errors(form.date) }}
        </div>

    <!-- Photo -->
    <div class="form-group col-12">
        <div class="file-upload-wrapper">
            {{ form_label(form.photo) }}
            {{ form_widget(form.photo, {'attr': {'onchange': 'previewImage(event)', 'id': 'photo_input'}}) }}
            {{ form_errors(form.photo) }}
<img
    id="photo_preview"
    src="#"
    alt="Aperçu de la photo"
    class="d-block mx-auto"
    style="width: 150px; height: 150px; object-fit: cover; margin-top: 10px; display: none; border-radius: 8px;"
/>    
    </div>
    </div>

    <!-- Submit Button -->
    <div class="form-btn col-12 mt-4">
        {{ form_widget(form.save, {
            'label': 'Créer l\'événement',
            'attr': {
                'class': 'th-btn fw-btn',
            }
        }) }}
        <i class="fa-regular fa-arrow-right"></i>
    </div>
</div>
        {{ form_end(form) }} <!-- Ajoutez cette ligne -->

    </div>
</div>


{% endblock %}
   {% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
{% endblock %}

{% block inline_scripts %}
{{ parent() }}
<script>
document.addEventListener('DOMContentLoaded', function() {
    flatpickr('.date-picker', {
        locale: "fr",
        minDate: "today",
        dateFormat: "d/m/Y",
        disableMobile: true
    });
});

 function previewImage(event) {
        const input = event.target;
        const preview = document.getElementById('photo_preview');

        if (input.files && input.files[0]) {
            const reader = new FileReader();

            reader.onload = function(e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
            };

            reader.readAsDataURL(input.files[0]);
        } else {
            preview.src = '#';
            preview.style.display = 'none';
        }
    }
</script>
{% endblock %}